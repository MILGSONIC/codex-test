<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crab Juggling Animation</title>
<style>
  body {
    margin: 0;
    background: #f0f0f0;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: #e0ffff; /* light cyan background */
  }
</style>
</head>
<body>
<canvas id="crabCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('crabCanvas');
const ctx = canvas.getContext('2d');
const centerX = canvas.width / 2;
const baseY = canvas.height - 150;
const ballRadius = 20;
const amplitude = 120;

const balls = [
  { phase: 0, radius: 20, color: '#FFA07A', shape: 'ball' },
  { phase: Math.PI * 2 / 3, radius: 18, color: '#FFD700', shape: 'star' },
  { phase: Math.PI * 4 / 3, radius: 22, color: '#AFEEEE', shape: 'ball' }
];

function drawCrab(time) {
  const bodyX = centerX;
  const bodyY = canvas.height - 80;
  const bodyWidth = 80;
  const bodyHeight = 40;

  // body
  ctx.fillStyle = '#000080'; // navy blue
  ctx.beginPath();
  ctx.ellipse(bodyX, bodyY, bodyWidth, bodyHeight, 0, 0, Math.PI * 2);
  ctx.fill();

  // legs
  ctx.strokeStyle = '#000080';
  ctx.lineWidth = 4;
  for (let i = -3; i <= 3; i++) {
    if (i === 0) continue;
    ctx.beginPath();
    ctx.moveTo(bodyX + i * 15, bodyY + bodyHeight);
    ctx.lineTo(bodyX + i * 15 + 10 * Math.sign(i), bodyY + bodyHeight + 20);
    ctx.stroke();
  }

  // claws animation
  const clawAngle = Math.sin(time / 500) * 0.5;
  drawClaw(bodyX - bodyWidth, bodyY - 10, -1, clawAngle);
  drawClaw(bodyX + bodyWidth, bodyY - 10, 1, -clawAngle);

  // eyes
  const eyeOffsetX = 20;
  const eyeOffsetY = 25;
  drawEye(bodyX - eyeOffsetX, bodyY - eyeOffsetY);
  drawEye(bodyX + eyeOffsetX, bodyY - eyeOffsetY);
}

function drawClaw(x, y, direction, angle) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(angle * direction);
  ctx.strokeStyle = '#000080';
  ctx.lineWidth = 6;
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(30 * direction, -20);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(30 * direction, -20);
  ctx.lineTo(50 * direction, 0);
  ctx.stroke();
  ctx.restore();
}

function drawEye(x, y) {
  ctx.fillStyle = 'white';
  ctx.beginPath();
  ctx.arc(x, y, 8, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = 'black';
  ctx.beginPath();
  ctx.arc(x, y, 3, 0, Math.PI * 2);
  ctx.fill();
}

function drawStar(radius, color) {
  const inner = radius * 0.5;
  ctx.fillStyle = color;
  ctx.beginPath();
  for (let i = 0; i < 5; i++) {
    const outerAngle = (i * 2 * Math.PI) / 5 - Math.PI / 2;
    const innerAngle = outerAngle + Math.PI / 5;
    if (i === 0) {
      ctx.moveTo(Math.cos(outerAngle) * radius, Math.sin(outerAngle) * radius);
    } else {
      ctx.lineTo(Math.cos(outerAngle) * radius, Math.sin(outerAngle) * radius);
    }
    ctx.lineTo(Math.cos(innerAngle) * inner, Math.sin(innerAngle) * inner);
  }
  ctx.closePath();
  ctx.fill();
  ctx.strokeStyle = 'black';
  ctx.lineWidth = 2;
  ctx.stroke();
}

function drawBall(x, y, time, opts = {}) {
  const radius = opts.radius || ballRadius;
  const color = opts.color || 'white';
  const shape = opts.shape || 'ball';

  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(time / 500);

  if (shape === 'star') {
    drawStar(radius, color);
  } else {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.arc(0, 0, radius, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = 'black';
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.fillStyle = 'black';
    for (let i = 0; i < 6; i++) {
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.arc(0, 0, radius * 0.6, i * Math.PI / 3, i * Math.PI / 3 + Math.PI / 6);
      ctx.closePath();
      ctx.fill();
    }
  }
  ctx.restore();
}

function animate(time) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawCrab(time);
  balls.forEach(ball => {
    const angle = time / 600 + ball.phase;
    const x = centerX + amplitude * Math.sin(angle);
    const y = baseY - Math.abs(Math.cos(angle)) * amplitude;
    drawBall(x, y, time + ball.phase * 100, ball);
  });

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);
</script>
</body>
</html>

