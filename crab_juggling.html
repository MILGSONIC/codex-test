<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Crab Juggling Animation</title>
<style>
  body {
    margin: 0;
    background: #f0f0f0;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: none; /* background drawn via canvas */
  }
</style>
</head>
<body>
<canvas id="crabCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('crabCanvas');
const ctx = canvas.getContext('2d');
const centerX = canvas.width / 2;
const baseY = canvas.height - 150;
const ballRadius = 20;
const amplitude = 120;

// bubble configuration
const sandHeight = 60;
const bubbles = Array.from({ length: 15 }, () => ({
  x: Math.random() * canvas.width,
  y: canvas.height - sandHeight - Math.random() * 100,
  radius: 2 + Math.random() * 3,
  speed: 0.5 + Math.random()
}));

function drawCrab(time) {
  const bodyX = centerX;
  const bodyY = canvas.height - 80;
  const bodyWidth = 80;
  const bodyHeight = 40;

  // body with radial gradient for a rounded look
  const bodyGradient = ctx.createRadialGradient(
    bodyX,
    bodyY - bodyHeight * 0.3,
    bodyHeight * 0.3,
    bodyX,
    bodyY,
    bodyWidth
  );
  bodyGradient.addColorStop(0, '#66aaff'); // lighter center
  bodyGradient.addColorStop(1, '#000080'); // darker edges
  ctx.fillStyle = bodyGradient;
  ctx.beginPath();
  ctx.ellipse(bodyX, bodyY, bodyWidth, bodyHeight, 0, 0, Math.PI * 2);
  ctx.fill();

  // legs with subtle animation
  ctx.strokeStyle = '#000080';
  ctx.lineWidth = 4;
  for (let i = -3; i <= 3; i++) {
    if (i === 0) continue;
    const direction = Math.sign(i);
    const baseX = bodyX + i * 15;
    const baseY = bodyY + bodyHeight;
    drawLeg(baseX, baseY, direction, i, time);
  }

  // claws animation
  const clawAngle = Math.sin(time / 500) * 0.5;
  drawClaw(bodyX - bodyWidth, bodyY - 10, -1, clawAngle);
  drawClaw(bodyX + bodyWidth, bodyY - 10, 1, -clawAngle);

  // eyes
  const eyeOffsetX = 20;
  const eyeOffsetY = 25;
  drawEye(bodyX - eyeOffsetX, bodyY - eyeOffsetY);
  drawEye(bodyX + eyeOffsetX, bodyY - eyeOffsetY);
}

function drawClaw(x, y, direction, angle) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(angle * direction);
  ctx.strokeStyle = '#000080';
  ctx.lineWidth = 6;

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.quadraticCurveTo(15 * direction, -15, 30 * direction, -20);
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(30 * direction, -20);
  ctx.quadraticCurveTo(40 * direction, -10, 50 * direction, 0);
  ctx.stroke();

  // closing pincer
  ctx.beginPath();
  ctx.moveTo(50 * direction, 0);
  ctx.lineTo(60 * direction, -5);
  ctx.moveTo(50 * direction, 0);
  ctx.lineTo(60 * direction, 5);
  ctx.stroke();

  ctx.restore();
}

function drawLeg(x, y, direction, index, time) {
  ctx.beginPath();
  ctx.moveTo(x, y);
  const oscillation = Math.sin(time / 400 + index) * 5;
  ctx.lineTo(x + 10 * direction, y + 15 + oscillation);
  ctx.lineTo(x + 20 * direction, y + 30 + oscillation);
  ctx.lineTo(x + 25 * direction, y + 45);
  ctx.stroke();
}

function drawEye(x, y) {
  ctx.fillStyle = 'white';
  ctx.beginPath();
  ctx.arc(x, y, 8, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = 'black';
  ctx.beginPath();
  ctx.arc(x, y, 3, 0, Math.PI * 2);
  ctx.fill();
}

function drawBall(x, y, time) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(time / 500);
  ctx.fillStyle = 'white';
  ctx.beginPath();
  ctx.arc(0, 0, ballRadius, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = 'black';
  ctx.lineWidth = 2;
  ctx.stroke();

  ctx.fillStyle = 'black';
  for (let i = 0; i < 6; i++) {
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.arc(0, 0, ballRadius * 0.6, i * Math.PI / 3, i * Math.PI / 3 + Math.PI / 6);
    ctx.closePath();
    ctx.fill();
  }
  ctx.restore();
}

function drawBubbles() {
  ctx.fillStyle = 'rgba(255,255,255,0.7)';
  bubbles.forEach(b => {
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.radius, 0, Math.PI * 2);
    ctx.fill();
    b.y -= b.speed;
    if (b.y + b.radius < 0) {
      b.y = canvas.height - sandHeight;
      b.x = Math.random() * canvas.width;
    }
  });
}

function animate(time) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // sky/water background
  const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
  gradient.addColorStop(0, '#87CEEB');
  gradient.addColorStop(0.7, '#E0FFFF');
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // seabed
  ctx.fillStyle = '#F4A460';
  ctx.fillRect(0, canvas.height - sandHeight, canvas.width, sandHeight);

  drawBubbles();

  const angle = time / 600;
  const ballX = centerX + amplitude * Math.sin(angle);
  const ballY = baseY - Math.abs(Math.cos(angle)) * amplitude;

  drawCrab(time);
  drawBall(ballX, ballY, time);

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);
</script>
</body>
</html>

